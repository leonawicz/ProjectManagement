<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Matthew Leonawicz" />


<title>Matt’s Projects</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/united.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>
<style type="text/css">
/* padding for bootstrap navbar */
body {
padding-top: 50px;
padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar) */
.section h2 {
padding-top: 55px;
margin-top: -55px;
}
.section h3 {
padding-top: 55px;
margin-top: -55px;
}
/* don't use link color in navbar */
.dropdown-menu>li>a {
color: black;
}
/* some padding for disqus */
#disqus_thread {
margin-top: 45px;
}
</style>
<link rel="stylesheet" href="libs/font-awesome-4.1.0/css/font-awesome.min.css"/>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #303030; color: #cccccc; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #cccccc; background-color: #303030; }
code > span.kw { color: #f0dfaf; }
code > span.dt { color: #dfdfbf; }
code > span.dv { color: #dcdccc; }
code > span.bn { color: #dca3a3; }
code > span.fl { color: #c0bed1; }
code > span.ch { color: #dca3a3; }
code > span.st { color: #cc9393; }
code > span.co { color: #7f9f7f; }
code > span.ot { color: #efef8f; }
code > span.al { color: #ffcfaf; }
code > span.fu { color: #efef8f; }
code > span.er { color: #c3bf9f; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46129458-3', 'auto');
  ga('send', 'pageview');

</script>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<div class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Project Management</a>
      </div>
      <div class="navbar-collapse collapse navbar-responsive-collapse">
        <ul class="nav navbar-nav">
          <li class="dropdown">
            <a href="rpm" class="dropdown-toggle" data-toggle="dropdown">rpm <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li class="dropdown-header">About rpm</li>
              <li><a href="index.html">Introduction</a></li>
              <li><a href="code_sankey.html">Related items</a></li>
              <li><a href="pm.html">Example usage</a></li>
            </ul>

          <li class="dropdown">
            <a href="r-code" class="dropdown-toggle" data-toggle="dropdown">R Code <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="objects.html">Default objects</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Functions</li>
              <li><a href="func_new.html">Start a new project</a></li>
              <li><a href="func_rmd.html">Working with Rmd files</a></li>
              <li><a href="func_convert.html">Document conversion</a></li>
              <li><a href="func_organize.html">Organize documents</a></li>
              <li><a href="func_stats.html">Project statistics</a></li>
              <li><a href="func_website.html">Make a project website</a></li>
              <li><a href="func_user_website.html">Github user website</a></li>
            </ul>

          <li class="dropdown">
            <a href="all-projects" class="dropdown-toggle" data-toggle="dropdown">All Projects <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li class="dropdown-header">Hierarchy of current projects</li>
              <li><a href="proj_sankey.html">Projects diagram</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Access all projects</li>
              <li><a href="http://leonawicz.github.io">leonawicz.github.io</a></li>
            </ul>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <a class="btn btn-link" href="https://github.com/leonawicz/ProjectManagement">
            <i class="fa fa-github fa-lg"></i>
            Github
          </a>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>

<div id="header">
<h1 class="title">Matt’s Projects</h1>
<h4 class="author"><em>Matthew Leonawicz</em></h4>
</div>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>I have begun using a Sankey diagram to illustrate various types of connections among my projects. Here the purpose is to show the code used to create the project hierarchy graph shows elsewhere (and below).</p>
<div id="motivation" class="section level3">
<h3>Motivation</h3>
<p>I have created this diagram showing project and collaborator relationships that occur in my current work as part of this <code>rpm</code> Project Management Project. However, this is a special case shown here. In general, the reason for folding this type of graph into all of my individual projects as part of project management is to show code and data relationships that exist for a specific project. For example, <code>rpm</code> has its own code flow diagram as do my other projects. But here the focus is on the particular project hierarchy diagram that is part of this project.</p>
</div>
</div>
<div id="project-hierarchy-r-code" class="section level2">
<h2>Project hierarchy <strong>R</strong> code</h2>
<p>Here is the code used to generate the current project hierarchy diagram. Two packages are required.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(igraph)
<span class="kw">require</span>(rCharts)</code></pre>
<p>Current projects are hardcoded and are updated by hand when my work changes. A necessary evil. This is essentially the data, consisting of both projects and collaborators.</p>
<pre class="sourceCode r"><code class="sourceCode r">proj.mp &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Alfresco Noatak&quot;</span>, <span class="st">&quot;Alfresco Statewide&quot;</span>, <span class="st">&quot;Spatial Lightning Analysis&quot;</span>, 
    <span class="st">&quot;Data Extraction and Uncertainty Analysis&quot;</span>, <span class="st">&quot;Growing Season&quot;</span>, <span class="st">&quot;Mussel Project&quot;</span>, 
    <span class="st">&quot;Land Carbon&quot;</span>)
proj.etal &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Alfresco CRU/GCM Experimental Design&quot;</span>, <span class="st">&quot;Bird Project&quot;</span>, <span class="st">&quot;NWT/Comm. Charts DS&quot;</span>, 
    <span class="st">&quot;Sea Ice Edge Maps and Spinoff Projects&quot;</span>, <span class="st">&quot;Shiny App Server Migration&quot;</span>)
proj.m &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;CMIP3/CMIP5 GCM Comparisons&quot;</span>, <span class="st">&quot;Effective Spatial Scale Analysis&quot;</span>, 
    <span class="st">&quot;Randscape Development&quot;</span>, <span class="st">&quot;Alfresco Outputs&quot;</span>, <span class="st">&quot;rpm&quot;</span>)
proj.ongoing &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;SNAP Data QA/QC&quot;</span>, <span class="st">&quot;Training/Supervision&quot;</span>, <span class="st">&quot;R Shiny Apps General Maintenance&quot;</span>, 
    <span class="st">&quot;New App Development&quot;</span>, <span class="st">&quot;SNAP Tech Blog&quot;</span>, <span class="st">&quot;Continuing Education&quot;</span>)
proj.halted &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;FRP/FRI Scale-Conditional Alfresco Maps&quot;</span>, <span class="st">&quot;Moose Project&quot;</span>)
projects.list &lt;-<span class="st"> </span><span class="kw">list</span>(proj.mp, proj.etal, proj.m, proj.ongoing, proj.halted)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">actors.etal &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;Paul&quot;</span>, <span class="st">&quot;Alec&quot;</span>), <span class="st">&quot;Angie&quot;</span>, <span class="kw">c</span>(<span class="st">&quot;Angie&quot;</span>, <span class="st">&quot;Bob&quot;</span>), <span class="st">&quot;Angie&quot;</span>, 
    <span class="st">&quot;Bob&quot;</span>)
actors.all &lt;-<span class="st"> </span><span class="kw">unique</span>(<span class="kw">c</span>(<span class="st">&quot;Matt&quot;</span>, <span class="st">&quot;Paul&quot;</span>, <span class="kw">unlist</span>(actors.etal)))</code></pre>
<p>Directional connections must be made among project and among people and projects. The connections are expressed by element-wise comparison of the equal-length <code>to</code> and <code>from</code> vectors.</p>
<pre class="sourceCode r"><code class="sourceCode r">from &lt;-<span class="st"> </span><span class="kw">c</span>(
    <span class="co"># LHS</span>
    <span class="kw">rep</span>(<span class="st">&quot;Collaborators&quot;</span>, <span class="kw">length</span>(actors.all[actors.all!=<span class="st">&quot;Matt&quot;</span>])),
    <span class="kw">rep</span>(<span class="st">&quot;Matt&quot;</span>, <span class="kw">length</span>(<span class="kw">c</span>(proj.m, proj.ongoing, proj.halted))),
    <span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;Matt&quot;</span>, <span class="st">&quot;Paul&quot;</span>), <span class="kw">length</span>(proj.mp)),
    <span class="kw">rep</span>(<span class="st">&quot;Matt&quot;</span>, <span class="kw">length</span>(proj.etal)),
    <span class="kw">unlist</span>(actors.etal),
    <span class="co"># Specific connections</span>
    <span class="kw">rep</span>(<span class="st">&quot;Alfresco Outputs&quot;</span>, <span class="dv">3</span>),
    <span class="kw">rep</span>(<span class="st">&quot;SNAP Data QA/QC&quot;</span>, <span class="dv">4</span>),
    <span class="kw">rep</span>(<span class="st">&quot;Spatial Lightning Analysis&quot;</span>, <span class="dv">3</span>),
    <span class="kw">rep</span>(<span class="st">&quot;Sea Ice Edge Maps and Spinoff Projects&quot;</span>, <span class="dv">2</span>),
    <span class="kw">rep</span>(<span class="st">&quot;Training/Supervision&quot;</span>, <span class="dv">2</span>),
    <span class="kw">rep</span>(<span class="st">&quot;Randscape Development&quot;</span>, <span class="dv">2</span>),
    <span class="kw">rep</span>(<span class="st">&quot;Effective Spatial Scale Analysis&quot;</span>, <span class="dv">2</span>),
    <span class="kw">rep</span>(<span class="st">&quot;NWT/Comm. Charts DS&quot;</span>, <span class="dv">1</span>),
    <span class="kw">c</span>(<span class="st">&quot;Alfresco Noatak&quot;</span>, <span class="st">&quot;Alfresco Statewide&quot;</span>),
    <span class="kw">rep</span>(<span class="st">&quot;Data Extraction and Uncertainty Analysis&quot;</span>, <span class="dv">4</span>)
)

to &lt;-<span class="st"> </span><span class="kw">c</span>(
    actors.all[actors.all!=<span class="st">&quot;Matt&quot;</span>],
    proj.m,
    proj.ongoing,
    proj.halted,
    <span class="kw">rep</span>(proj.mp, <span class="dv">2</span>),
    proj.etal,
    <span class="kw">rep</span>(proj.etal, <span class="dt">times=</span><span class="kw">sapply</span>(actors.etal, length)),
    <span class="co"># Specific connections</span>
    <span class="kw">c</span>(<span class="st">&quot;CMIP3/CMIP5 GCM Comparisons&quot;</span>, <span class="st">&quot;Land Carbon&quot;</span>, <span class="st">&quot;Bird Project&quot;</span>), <span class="co"># from &quot;Alfresco Outputs&quot;</span>
    <span class="kw">c</span>(<span class="st">&quot;Alfresco Outputs&quot;</span>, <span class="st">&quot;CMIP3/CMIP5 GCM Comparisons&quot;</span>, <span class="st">&quot;Alfresco CRU/GCM Experimental Design&quot;</span>, <span class="st">&quot;NWT/Comm. Charts DS&quot;</span>), <span class="co"># from &quot;SNAP Data QA/QC&quot;</span>
    <span class="kw">c</span>(<span class="st">&quot;Alfresco Noatak&quot;</span>, <span class="st">&quot;Alfresco Statewide&quot;</span>, <span class="st">&quot;Randscape Development&quot;</span>), <span class="co"># from &quot;Spatial Lightning Analysis</span>
    <span class="kw">c</span>(<span class="st">&quot;Randscape Development&quot;</span>, <span class="st">&quot;Alfresco Outputs&quot;</span>), <span class="co"># from &quot;Sea Ice Edge Maps and Spinoff Projects&quot;</span>
    <span class="kw">c</span>(<span class="st">&quot;Bird Project&quot;</span>, <span class="st">&quot;NWT/Comm. Charts DS&quot;</span>), <span class="co"># from &quot;Training/Supervision&quot;</span>
    <span class="kw">c</span>(<span class="st">&quot;Alfresco Outputs&quot;</span>, <span class="st">&quot;Effective Spatial Scale Analysis&quot;</span>), <span class="co"># from &quot;Randscape Development</span>
    <span class="kw">c</span>(<span class="st">&quot;Alfresco Outputs&quot;</span>, <span class="st">&quot;FRP/FRI Scale-Conditional Alfresco Maps&quot;</span>), <span class="co"># from &quot;Effective Spatial Scale Analysis&quot;</span>
    <span class="kw">c</span>(<span class="st">&quot;CMIP3/CMIP5 GCM Comparisons&quot;</span>), <span class="co">#from &quot;NWT/Comm. Charts DS&quot;</span>
    <span class="kw">rep</span>(<span class="st">&quot;FRP/FRI Scale-Conditional Alfresco Maps&quot;</span>, <span class="dv">2</span>), <span class="co"># from &quot;Alfresco Noatak&quot;, &quot;Alfresco Statewide&quot;</span>
    <span class="kw">c</span>(<span class="st">&quot;CMIP3/CMIP5 GCM Comparisons&quot;</span>, <span class="st">&quot;Effective Spatial Scale Analysis&quot;</span>, <span class="st">&quot;Randscape Development&quot;</span>, <span class="st">&quot;Alfresco Outputs&quot;</span>) <span class="co"># from &quot;Data Extraction and Uncertainty Analysis&quot;</span>
)</code></pre>
<p>The vectors are combined in a data frame and the <code>igraph</code> package is used to grow the tree diagram.</p>
<pre class="sourceCode r"><code class="sourceCode r">relations &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">from =</span> from, <span class="dt">to =</span> to)
g &lt;-<span class="st"> </span><span class="kw">graph.data.frame</span>(relations, <span class="dt">directed =</span> T, <span class="dt">vertices =</span> <span class="kw">data.frame</span>(<span class="kw">c</span>(<span class="st">&quot;Collaborators&quot;</span>, 
    actors.all, <span class="kw">unlist</span>(projects.list))))

gw &lt;-<span class="st"> </span><span class="kw">get.data.frame</span>(g)
gw$value &lt;-<span class="st"> </span><span class="dv">1</span>
<span class="kw">colnames</span>(gw) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;source&quot;</span>, <span class="st">&quot;target&quot;</span>, <span class="st">&quot;value&quot;</span>)
gw$source &lt;-<span class="st"> </span><span class="kw">as.character</span>(gw$source)
gw$target &lt;-<span class="st"> </span><span class="kw">as.character</span>(gw$target)</code></pre>
<p>The <code>rcharts</code> package has functionality for turning this into an interactive D3 visualization, which is nice, particularly the mouseover interactivity, since there can be so much visual overlap among projects. Additional javascript can be included to alter the colors. My strengths are in <strong>R</strong> so I borrowed this code snippet from online, but if you have skills with javascript and D3 you could probably do better with color control and opacity I imagine.</p>
<pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span>rCharts$<span class="kw">new</span>()
p$<span class="kw">setLib</span>(<span class="st">&quot;http://timelyportfolio.github.io/rCharts_d3_sankey/libraries/widgets/d3_sankey&quot;</span>)
p$<span class="kw">setTemplate</span>(<span class="dt">script =</span> <span class="st">&quot;http://timelyportfolio.github.io/rCharts_d3_sankey/libraries/widgets/d3_sankey/layouts/chart.html&quot;</span>)
p$<span class="kw">set</span>(<span class="dt">data =</span> gw, <span class="dt">nodeWidth =</span> <span class="dv">15</span>, <span class="dt">nodePadding =</span> <span class="dv">10</span>, <span class="dt">layout =</span> <span class="dv">32</span>, <span class="dt">width =</span> <span class="dv">900</span>, 
    <span class="dt">height =</span> <span class="dv">800</span>, <span class="dt">margin =</span> <span class="kw">list</span>(<span class="dt">right =</span> <span class="dv">20</span>, <span class="dt">left =</span> <span class="dv">20</span>, <span class="dt">bottom =</span> <span class="dv">20</span>, <span class="dt">top =</span> <span class="dv">20</span>), 
    <span class="dt">title =</span> <span class="st">&quot;Matt&#39;s Projects&quot;</span>)

p$<span class="kw">setTemplate</span>(<span class="dt">afterScript =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&lt;script&gt;</span><span class="ch">\n</span><span class="st">  var cscale = d3.scale.category20b();</span><span class="ch">\n</span><span class="st">  d3.selectAll(&#39;#{{ chartId }} svg path.link&#39;)</span><span class="ch">\n</span><span class="st">    .style(&#39;stroke&#39;, function(d){</span><span class="ch">\n</span><span class="st">      return cscale(d.source.name);</span><span class="ch">\n</span><span class="st">    })</span><span class="ch">\n</span><span class="st">  d3.selectAll(&#39;#{{ chartId }} svg .node rect&#39;)</span><span class="ch">\n</span><span class="st">    .style(&#39;fill&#39;, function(d){</span><span class="ch">\n</span><span class="st">      return cscale(d.name)</span><span class="ch">\n</span><span class="st">    })</span><span class="ch">\n</span><span class="st">    .style(&#39;stroke&#39;, &#39;none&#39;)</span><span class="ch">\n</span><span class="st">&lt;/script&gt;</span><span class="ch">\n</span><span class="st">&quot;</span>)</code></pre>
<p>Embed the chart in a document when rendering.</p>
<pre class="sourceCode r"><code class="sourceCode r">p$<span class="kw">show</span>(<span class="st">&quot;iframesrc&quot;</span>, <span class="dt">cdn=</span>T)</code></pre>
<iframe srcdoc=" &lt;!doctype HTML&gt;
&lt;meta charset = 'utf-8'&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;link rel='stylesheet' href='http://timelyportfolio.github.io/rCharts_d3_sankey/css/sankey.css'&gt;
    
    &lt;script src='http://d3js.org/d3.v3.min.js' type='text/javascript'&gt;&lt;/script&gt;
    &lt;script src='http://timelyportfolio.github.io/rCharts_d3_sankey/js/sankey.js' type='text/javascript'&gt;&lt;/script&gt;
    
    &lt;style&gt;
    .rChart {
      display: block;
      margin-left: auto; 
      margin-right: auto;
      width: 900px;
      height: 800px;
    }  
    &lt;/style&gt;
    
  &lt;/head&gt;
  &lt;body &gt;
    
    &lt;div id = 'chart8bc6d931f5a' class = 'rChart d3_sankey'&gt;&lt;/div&gt;    
    ï»¿&lt;!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
--&gt;

&lt;script&gt;
(function(){
var params = {
 &quot;dom&quot;: &quot;chart8bc6d931f5a&quot;,
&quot;width&quot;:    900,
&quot;height&quot;:    800,
&quot;data&quot;: {
 &quot;source&quot;: [ &quot;Collaborators&quot;, &quot;Collaborators&quot;, &quot;Collaborators&quot;, &quot;Collaborators&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Paul&quot;, &quot;Matt&quot;, &quot;Paul&quot;, &quot;Matt&quot;, &quot;Paul&quot;, &quot;Matt&quot;, &quot;Paul&quot;, &quot;Matt&quot;, &quot;Paul&quot;, &quot;Matt&quot;, &quot;Paul&quot;, &quot;Matt&quot;, &quot;Paul&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Matt&quot;, &quot;Paul&quot;, &quot;Alec&quot;, &quot;Angie&quot;, &quot;Angie&quot;, &quot;Bob&quot;, &quot;Angie&quot;, &quot;Bob&quot;, &quot;Alfresco Outputs&quot;, &quot;Alfresco Outputs&quot;, &quot;Alfresco Outputs&quot;, &quot;SNAP Data QA/QC&quot;, &quot;SNAP Data QA/QC&quot;, &quot;SNAP Data QA/QC&quot;, &quot;SNAP Data QA/QC&quot;, &quot;Spatial Lightning Analysis&quot;, &quot;Spatial Lightning Analysis&quot;, &quot;Spatial Lightning Analysis&quot;, &quot;Sea Ice Edge Maps and Spinoff Projects&quot;, &quot;Sea Ice Edge Maps and Spinoff Projects&quot;, &quot;Training/Supervision&quot;, &quot;Training/Supervision&quot;, &quot;Randscape Development&quot;, &quot;Randscape Development&quot;, &quot;Effective Spatial Scale Analysis&quot;, &quot;Effective Spatial Scale Analysis&quot;, &quot;NWT/Comm. Charts DS&quot;, &quot;Alfresco Noatak&quot;, &quot;Alfresco Statewide&quot;, &quot;Data Extraction and Uncertainty Analysis&quot;, &quot;Data Extraction and Uncertainty Analysis&quot;, &quot;Data Extraction and Uncertainty Analysis&quot;, &quot;Data Extraction and Uncertainty Analysis&quot; ],
&quot;target&quot;: [ &quot;Paul&quot;, &quot;Alec&quot;, &quot;Angie&quot;, &quot;Bob&quot;, &quot;CMIP3/CMIP5 GCM Comparisons&quot;, &quot;Effective Spatial Scale Analysis&quot;, &quot;Randscape Development&quot;, &quot;Alfresco Outputs&quot;, &quot;rpm&quot;, &quot;SNAP Data QA/QC&quot;, &quot;Training/Supervision&quot;, &quot;R Shiny Apps General Maintenance&quot;, &quot;New App Development&quot;, &quot;SNAP Tech Blog&quot;, &quot;Continuing Education&quot;, &quot;FRP/FRI Scale-Conditional Alfresco Maps&quot;, &quot;Moose Project&quot;, &quot;Alfresco Noatak&quot;, &quot;Alfresco Statewide&quot;, &quot;Spatial Lightning Analysis&quot;, &quot;Data Extraction and Uncertainty Analysis&quot;, &quot;Growing Season&quot;, &quot;Mussel Project&quot;, &quot;Land Carbon&quot;, &quot;Alfresco Noatak&quot;, &quot;Alfresco Statewide&quot;, &quot;Spatial Lightning Analysis&quot;, &quot;Data Extraction and Uncertainty Analysis&quot;, &quot;Growing Season&quot;, &quot;Mussel Project&quot;, &quot;Land Carbon&quot;, &quot;Alfresco CRU/GCM Experimental Design&quot;, &quot;Bird Project&quot;, &quot;NWT/Comm. Charts DS&quot;, &quot;Sea Ice Edge Maps and Spinoff Projects&quot;, &quot;Shiny App Server Migration&quot;, &quot;Alfresco CRU/GCM Experimental Design&quot;, &quot;Alfresco CRU/GCM Experimental Design&quot;, &quot;Bird Project&quot;, &quot;NWT/Comm. Charts DS&quot;, &quot;NWT/Comm. Charts DS&quot;, &quot;Sea Ice Edge Maps and Spinoff Projects&quot;, &quot;Shiny App Server Migration&quot;, &quot;CMIP3/CMIP5 GCM Comparisons&quot;, &quot;Land Carbon&quot;, &quot;Bird Project&quot;, &quot;Alfresco Outputs&quot;, &quot;CMIP3/CMIP5 GCM Comparisons&quot;, &quot;Alfresco CRU/GCM Experimental Design&quot;, &quot;NWT/Comm. Charts DS&quot;, &quot;Alfresco Noatak&quot;, &quot;Alfresco Statewide&quot;, &quot;Randscape Development&quot;, &quot;Randscape Development&quot;, &quot;Alfresco Outputs&quot;, &quot;Bird Project&quot;, &quot;NWT/Comm. Charts DS&quot;, &quot;Alfresco Outputs&quot;, &quot;Effective Spatial Scale Analysis&quot;, &quot;Alfresco Outputs&quot;, &quot;FRP/FRI Scale-Conditional Alfresco Maps&quot;, &quot;CMIP3/CMIP5 GCM Comparisons&quot;, &quot;FRP/FRI Scale-Conditional Alfresco Maps&quot;, &quot;FRP/FRI Scale-Conditional Alfresco Maps&quot;, &quot;CMIP3/CMIP5 GCM Comparisons&quot;, &quot;Effective Spatial Scale Analysis&quot;, &quot;Randscape Development&quot;, &quot;Alfresco Outputs&quot; ],
&quot;value&quot;: [      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      1 ] 
},
&quot;nodeWidth&quot;:     15,
&quot;nodePadding&quot;:     10,
&quot;layout&quot;:     32,
&quot;margin&quot;: {
 &quot;right&quot;:     20,
&quot;left&quot;:     20,
&quot;bottom&quot;:     20,
&quot;top&quot;:     20 
},
&quot;title&quot;: &quot;Matt's Projects&quot;,
&quot;id&quot;: &quot;chart8bc6d931f5a&quot; 
};

params.units ? units = &quot; &quot; + params.units : units = &quot;&quot;;

//hard code these now but eventually make available
var formatNumber = d3.format(&quot;0,.0f&quot;),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(&quot;.2%&quot;);
}

var svg = d3.select('#' + params.id).append(&quot;svg&quot;)
    .attr(&quot;width&quot;, params.width)
    .attr(&quot;height&quot;, params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ &quot;name&quot;: data.source[i] });
    nodes.push({ &quot;name&quot;: data.target[i] });
    links.push({ &quot;source&quot;: data.source[i], &quot;target&quot;: data.target[i], &quot;value&quot;: +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { &quot;name&quot;: d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append(&quot;g&quot;).selectAll(&quot;.link&quot;)
  .data(links)
.enter().append(&quot;path&quot;)
  .attr(&quot;class&quot;, &quot;link&quot;)
  .attr(&quot;d&quot;, path)
  .style(&quot;stroke-width&quot;, function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append(&quot;title&quot;)
  .text(function (d) { return d.source.name + &quot; â†’ &quot; + d.target.name + &quot;\n&quot; + format(d.value); });

var node = svg.append(&quot;g&quot;).selectAll(&quot;.node&quot;)
  .data(nodes)
.enter().append(&quot;g&quot;)
  .attr(&quot;class&quot;, &quot;node&quot;)
  .attr(&quot;transform&quot;, function (d) { return &quot;translate(&quot; + d.x + &quot;,&quot; + d.y + &quot;)&quot;; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on(&quot;dragstart&quot;, function () { this.parentNode.appendChild(this); })
  .on(&quot;drag&quot;, dragmove));

node.append(&quot;rect&quot;)
  .attr(&quot;height&quot;, function (d) { return d.dy; })
  .attr(&quot;width&quot;, sankey.nodeWidth())
  .style(&quot;fill&quot;, function (d) { return d.color = color(d.name.replace(/ .*/, &quot;&quot;)); })
  .style(&quot;stroke&quot;, function (d) { return d3.rgb(d.color).darker(2); })
.append(&quot;title&quot;)
  .text(function (d) { return d.name + &quot;\n&quot; + format(d.value); });

node.append(&quot;text&quot;)
  .attr(&quot;x&quot;, -6)
  .attr(&quot;y&quot;, function (d) { return d.dy / 2; })
  .attr(&quot;dy&quot;, &quot;.35em&quot;)
  .attr(&quot;text-anchor&quot;, &quot;end&quot;)
  .attr(&quot;transform&quot;, null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x &lt; params.width / 2; })
  .attr(&quot;x&quot;, 6 + sankey.nodeWidth())
  .attr(&quot;text-anchor&quot;, &quot;start&quot;);

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr(&quot;transform&quot;, 
        &quot;translate(&quot; + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + &quot;,&quot; + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + &quot;)&quot;);
        sankey.relayout();
        link.attr(&quot;d&quot;, path);
  }
})();
&lt;/script&gt;
    
    
    &lt;script&gt;
      var cscale = d3.scale.category20b();
      d3.selectAll('#chart8bc6d931f5a svg path.link')
        .style('stroke', function(d){
          return cscale(d.source.name);
        })
      d3.selectAll('#chart8bc6d931f5a svg .node rect')
        .style('fill', function(d){
          return cscale(d.name)
        })
        .style('stroke', 'none')
    &lt;/script&gt;
        
  &lt;/body&gt;
&lt;/html&gt; " scrolling="no" frameBorder="0" seamless class="rChart  http://timelyportfolio.github.io/rCharts_d3_sankey/libraries/widgets/d3_sankey  " id="iframe-chart8bc6d931f5a">
</iframe>
<style>iframe.rChart{ width: 100%; height: 400px;}</style>
<style>iframe.rChart{ width: 100%; height: 840px;}</style>
</div>

<!-- some extra javascript for older browsers -->
<script type="text/javascript" src="libs/polyfill.js"></script>
<script>
  // manage active state of menu based on current page
  $(document).ready(function () {
  
    // active menu
    href = window.location.pathname
    href = href.substr(href.lastIndexOf('/') + 1)
    $('a[href="' + href + '"]').parent().addClass('active');
    
    // manage active menu header
    if (href.startsWith('authoring_'))
      $('a[href="' + 'authoring' + '"]').parent().addClass('active');
    else if (href.endsWith('_format.html'))
      $('a[href="' + 'formats' + '"]').parent().addClass('active');
    else if (href.startsWith('developer_'))
      $('a[href="' + 'developer' + '"]').parent().addClass('active');
	  
  });
</script>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
